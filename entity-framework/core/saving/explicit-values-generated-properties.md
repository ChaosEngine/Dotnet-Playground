---
title: Setting explicit values for generated properties
author: rowanmiller
ms.author: rowmil
manager: rowanmiller
ms.date: 10/27/2016
ms.topic: article
ms.assetid: 3f1993c2-cdf5-425b-bac2-a2665a20322b
ms.prod: entity-framework
uid: core/saving/explicit-values-generated-properties
---
# Setting explicit values for generated properties

> [!NOTE]
> This documentation is for EF Core. For EF6.x, see [Entity Framework 6](../../ef6/index.md).

A generated property is a property whose value is generated (either by EF or the database) when the entity is added and/or updated. See [Generated Properties](../modeling/generated-properties.md) for more information.

There may be situations where you want to set an explicit value for a generated property, rather than having one generated.

> [!TIP]
> You can view this article's [sample](https://github.com/aspnet/EntityFramework.Docs/tree/master/samples/core/Saving/Saving/ExplicitValuesGenerateProperties/) on GitHub.

## The model

The model used in this article contains a single `Employee` entity.

<!-- [!code-csharp[Main](samples/core/Saving/Saving/ExplicitValuesGenerateProperties/Employee.cs)] -->
````csharp
public class Employee
{
    public int EmployeeId { get; set; }
    public string Name { get; set; }
    public DateTime EmploymentStarted { get; set; }
}
````

The context is setup to target SQL Server:

* By convention the `Employee.EmployeeId` property will be a store generated `IDENTITY` column

* The `Employee.EmploymentStarted` property has also been setup to have values generated by the database for new entities

<!-- [!code-csharp[Main](samples/core/Saving/Saving/ExplicitValuesGenerateProperties/EmployeeContext.cs)] -->
````csharp
public class EmployeeContext : DbContext
{
    public DbSet<Employee> Employees { get; set; }

    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        optionsBuilder.UseSqlServer(@"Server=(localdb)\mssqllocaldb;Database=EFSaving.ExplicitValuesGenerateProperties;Trusted_Connection=True;");
    }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Employee>()
            .Property(b => b.EmploymentStarted)
            .HasDefaultValueSql("CONVERT(date, GETDATE())");
    }
}
````

## Saving an explicit value during add

**In the following code, two employees are being inserted into the database**

* For the first, no value is assigned to `Employee.EmploymentStarted` property, so it remains set to the CLR default value for `DateTime`.

* For the second, we have set an explicit value of `1-Jan-2000`.

<!-- [!code-csharp[Main](samples/core/Saving/Saving/ExplicitValuesGenerateProperties/Sample.cs?highlight=4)] -->
````csharp
        using (var db = new EmployeeContext())
        {
            db.Employees.Add(new Employee { Name = "John Doe" });
            db.Employees.Add(new Employee { Name = "Jane Doe", EmploymentStarted = new DateTime(2000, 1, 1) });
            db.SaveChanges();

            foreach (var employee in db.Employees)
            {
                Console.WriteLine(employee.EmployeeId + ": " + employee.Name + ", " + employee.EmploymentStarted);
            }
        }
````

The code results in the following output, showing that the database generated a value for the first employee and our explicit value was used for the second:

<!-- literal_block"xml:space": "preserve", "classes  "backrefs  "names  "dupnames   -->
````
   1: John Doe, 1/28/2016 12:00:00 AM
   2: Jane Doe, 1/1/2000 12:00:00 AM
````

### Explicit values into SQL Server IDENTITY columns

For most situations, the approach shown above will work for key properties. However, to insert explicit values into a SQL Server `IDENTITY` column, you need to manually enable `IDENTITY_INSERT` before calling `SaveChanges()`.

> [!NOTE]
> We have a [feature request](https://github.com/aspnet/EntityFramework/issues/703) on our backlog to do this automatically within the SQL Server provider.

<!-- [!code-csharp[Main](samples/core/Saving/Saving/ExplicitValuesGenerateProperties/Sample.cs?highlight=6,7,8,9,10,11,12,13,14,15,16)] -->
````csharp
        using (var db = new EmployeeContext())
        {
            db.Employees.Add(new Employee { EmployeeId = 100, Name = "John Doe" });
            db.Employees.Add(new Employee { EmployeeId = 101, Name = "Jane Doe" });

            db.Database.OpenConnection();
            try
            {
                db.Database.ExecuteSqlCommand("SET IDENTITY_INSERT dbo.Employee ON");
                db.SaveChanges();
                db.Database.ExecuteSqlCommand("SET IDENTITY_INSERT dbo.Employee OFF");
            }
            finally
            {
                db.Database.CloseConnection();
            }


            foreach (var employee in db.Employees)
            {
                Console.WriteLine(employee.EmployeeId + ": " + employee.Name);
            }
        }
````

## Setting an explicit values during update

> [!WARNING]
> Due to various bugs, this scenario is not properly supported in the current pre-release of EF Core. See [documentation issue #122](https://github.com/aspnet/EntityFramework.Docs/issues/122) for more details.
