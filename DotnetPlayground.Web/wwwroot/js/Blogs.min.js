"use strict";function BlogsOnLoad(){function e(e,o,n){let l=o.querySelector(`#accordion_${e}`);l||(l=document.createElement("div"),l.id="accordion_"+e,l.classList.add("accordion"),l.classList.add("my-2"),o.appendChild(l)),n.forEach((function(n){const d=n.postId,r=n.title,i=n.content,s=o.querySelector(`#heading_${e}_${d}`);if(s)s.querySelector(`#heading_${e}_${d} > button`).innerText=r;else{const o=document.createElement("div");o.classList.add("accordion-item");const n=`<h2 class="accordion-header" id="heading_${e}_${d}">\n<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_${e}_${d}" aria-expanded="false" aria-controls="collapse_${e}_${d}">\n${r}\n</button>\n</h2>\n<div id="collapse_${e}_${d}" class="accordion-collapse collapse" aria-labelledby="heading_${e}_${d}" data-bs-parent="#accordion_${e}">\n<div class="accordion-body">\n<form method="post" data-id="${e}" class="postForm row g-2">\n<div class="text-danger validation-summary-valid" data-valmsg-summary="true">\n<ul><li style="display:none"></li></ul>\n</div>\n<input type="hidden" name="PostId" value="${d}" data-val="true" required data-val-required="The PostID field is required." />\n<div class="form-group">\n<label for="editForm1_${d}">Title</label>\n<input type="text" name="Title" class="form-control" value="${r}" id="editForm1_${d}" placeholder="title"\n\tdata-val="true" required data-val-required="The Title field is required." />\n</div>\n<div class="form-group">\n<label for="editForm2_${d}">Content</label>\n<textarea name="Content" class="form-control" id="editForm2_${d}" rows="3" placeholder="content"\n\tdata-val="true" required data-val-required="The Content field is required.">${i}</textarea>\n</div>\n<div class="col-sm-12 col-md-4 col-lg-4">\n<input name="operation" type="submit" value="EditPost"\n\tformaction="Blogs/EditPost/${e}/true"\n\tclass="update-case form-control btn btn-secondary" />\n</div>\n<div class="mx-sm-0 col-sm-12 col-md-4 col-lg-4">\n<input name="operation" type="submit" value="DeletePost"\n\tformaction="Blogs/DeletePost/${e}/true"\n\tclass="delete-case form-control btn btn-danger" formnovalidate="formnovalidate" />\n</div>\n</form>\n</div>\n</div>`;o.innerHTML=n,l.appendChild(o),$(`#collapse_${e}_${d} > div > form`).validate({debug:!1,submitHandler:function(e){return!1===e.classList.contains("postForm")?a(e):t(e),!1}})}$("#addPost_"+e).collapse("hide"),$("#collapse_"+d).collapse("hide"),o.querySelector(`#addPost_${e} > form input[name='Title']`).value="",o.querySelector(`#addPost_${e} > form textarea`).value=""}))}function t(t){const a=$(t).data("id"),o=$(t).find("input[name='PostId']").val(),n=document.activeElement.value,l="DeletePost";n===l&&($(t).find("input#editForm1_"+o).remove(),$(t).find("textarea#editForm2_"+o).remove());const d=$(t).serialize(),r={RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value};$.ajax({method:n===l?"DELETE":"POST",url:`Blogs/${n}/${a}/true`,dataType:"json",data:d,headers:r}).done((function(t){if("error"!==t)if("deleted post"!==t){const o=document.querySelector("#collapse_"+a);e(a,o,[t])}else{const e=document.querySelector(`#heading_${a}_${o}`).parentElement;e.parentElement.removeChild(e)}else alert("error")})).fail((function(e,t,a){alert("error: "+t+" "+a)}))}function a(e){let t=$(e).parents("tr:first");const a=$(e).data("id"),o=$(e).find("#inp_"+a).val(),n=$(e).serialize(),l=document.activeElement.value,d="Delete";if(l!==d&&(""===o||o===t.find("label.displaying").text()))return;const r={RequestVerificationToken:$(e).find('input[name="__RequestVerificationToken"]').val()};$.ajax({method:l===d?"DELETE":"POST",url:`Blogs/${l}/${a}/true`,dataType:"json",data:n,headers:l===d?r:null}).done((function(a){if("error"!==a)if("deleted"!==a){$(e).find(".edit").val(a.url),t.find("label.displaying").text(a.url)}else $(t).remove();else alert("error")})).fail((function(e,t,a){alert("error: "+t+" "+a)}))}Array.prototype.slice.call(document.querySelectorAll("form.blogForm")).forEach((function(t){const a=t.dataset.id;let o=document.createElement("div");o.classList.add("col-sm-12"),o.classList.add("col-md-3"),o.classList.add("col-lg-1"),o.classList.add("mx-sm-1"),o.classList.add("px-0"),o.classList.add("unloaded"),o.innerHTML=`<a role="button" class="form-control btn btn-outline-success"\ndata-bs-toggle="collapse" href="#collapse_${a}" aria-expanded="false"\naria-controls="collapse_${a}">Posts</a>`,t.appendChild(o),o=document.createElement("div"),o.id="collapse_"+a,o.classList.add("collapse"),o.classList.add("mt-2"),o.classList.add("unloaded"),o.innerHTML=`<a role="button" class="btn btn-outline-primary" data-bs-toggle="collapse" href="#addPost_${a}" aria-expanded="false" aria-controls="addPost_${a}">\nNew Post\n</a>\n<div class="collapse mt-2 card-body border" id="addPost_${a}">\n<form method="post" action="Blogs/AddPost/${a}/false" class="postForm row g-2 m-3" data-id="${a}">\n<div class="text-danger validation-summary-valid" data-valmsg-summary="true">\n<ul><li style="display:none"></li></ul>\n</div>\n<div class="col-12">\n<label for="addForm1_${a}">Title</label>\n<input type="text" name="Title" class="form-control" id="addForm1_${a}" placeholder="title"\n\tdata-val="true" required data-val-required="The Title field is required." />\n</div>\n<div class="col-12">\n<label for="addForm2_${a}">Content</label>\n<textarea name="Content" class="form-control" id="addForm2_${a}" rows="3" placeholder="content"\n\tdata-val="true" required data-val-required="The Content field is required."></textarea>\n</div>\n<div class="col-sm-12 col-md-4 col-lg-4">\n<input name="operation" type="submit" value="AddPost" class="add-case form-control btn btn-primary" />\n</div>\n</form>\n</div>`,t.parentNode.insertBefore(o,t.nextSibling),$("#collapse_"+a).on("show.bs.collapse",(function(t){const o=t.currentTarget;if(!0!==o.classList.contains("unloaded"))return;o.classList.remove("unloaded");const n={RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value};$.ajax({method:"POST",url:"Blogs/GetPosts/"+a,dataType:"json",headers:n}).done((function(t){"error"!==t?t&&t.length>0&&e(a,o,t):alert("error")})).fail((function(e,t,a){alert("error: "+t+" "+a)}))}))})),$.validator.setDefaults({debug:!1,submitHandler:function(e){return!1===e.classList.contains("postForm")?a(e):t(e),!1}})}
//# sourceMappingURL=Blogs.min.js.map
