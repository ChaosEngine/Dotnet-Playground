"use strict";function BlogsOnLoad(){function e(e,d,n){let o=d.querySelector(`#accordion_${e}`);o||(o=document.createElement("div"),o.id="accordion_"+e,o.classList.add("accordion"),o.classList.add("my-2"),d.appendChild(o)),n.forEach(function(n){const l=n.postId,s=n.title,r=n.content,i=d.querySelector(`#heading_${e}_${l}`);if(i)i.querySelector(`#heading_${e}_${l} > button`).innerText=s;else{const d=document.createElement("div");d.classList.add("accordion-item");const n=document.createElement("h2");n.classList.add("accordion-header"),n.id=`heading_${e}_${l}`;const i=document.createElement("button");i.classList.add("accordion-button","collapsed"),i.type="button",i.setAttribute("data-bs-toggle","collapse"),i.setAttribute("data-bs-target",`#collapse_${e}_${l}`),i.setAttribute("aria-expanded","false"),i.setAttribute("aria-controls",`collapse_${e}_${l}`),i.textContent=s,n.appendChild(i);const c=document.createElement("div");c.id=`collapse_${e}_${l}`,c.classList.add("accordion-collapse","collapse"),c.setAttribute("aria-labelledby",`heading_${e}_${l}`),c.setAttribute("data-bs-parent",`#accordion_${e}`);const u=document.createElement("div");u.classList.add("accordion-body");const m=document.createElement("form");m.method="post",m.setAttribute("data-id",e),m.classList.add("postForm","row","g-2");const p=document.createElement("div");p.classList.add("text-danger","validation-summary-valid"),p.setAttribute("data-valmsg-summary","true");const f=document.createElement("ul"),b=document.createElement("li");b.style.display="none",f.appendChild(b),p.appendChild(f),m.appendChild(p);const h=document.createElement("input");h.type="hidden",h.name="PostId",h.value=l,h.setAttribute("data-val","true"),h.required=!0,h.setAttribute("data-val-required","The PostID field is required."),m.appendChild(h);const v=document.createElement("div");v.classList.add("form-group");const C=document.createElement("label");C.setAttribute("for",`editForm1_${l}`),C.textContent="Title";const E=document.createElement("input");E.type="text",E.name="Title",E.classList.add("form-control"),E.value=s,E.id=`editForm1_${l}`,E.placeholder="title",E.setAttribute("data-val","true"),E.required=!0,E.setAttribute("data-val-required","The Title field is required."),v.appendChild(C),v.appendChild(E),m.appendChild(v);const _=document.createElement("div");_.classList.add("form-group");const L=document.createElement("label");L.setAttribute("for",`editForm2_${l}`),L.textContent="Content";const g=document.createElement("textarea");g.name="Content",g.classList.add("form-control"),g.id=`editForm2_${l}`,g.rows=3,g.placeholder="content",g.setAttribute("data-val","true"),g.required=!0,g.setAttribute("data-val-required","The Content field is required."),g.textContent=r,_.appendChild(L),_.appendChild(g),m.appendChild(_);const A=document.createElement("div");A.classList.add("col-sm-12","col-md-4","col-lg-4");const y=document.createElement("input");y.name="operation",y.type="submit",y.value="EditPost",y.setAttribute("formaction",`Blogs/EditPost/${e}/true`),y.classList.add("update-case","form-control","btn","btn-secondary"),A.appendChild(y),m.appendChild(A);const q=document.createElement("div");q.classList.add("mx-sm-0","col-sm-12","col-md-4","col-lg-4");const x=document.createElement("input");x.name="operation",x.type="submit",x.value="DeletePost",x.setAttribute("formaction",`Blogs/DeletePost/${e}/true`),x.classList.add("delete-case","form-control","btn","btn-danger"),x.setAttribute("formnovalidate","formnovalidate"),q.appendChild(x),m.appendChild(q),u.appendChild(m),c.appendChild(u),d.appendChild(n),d.appendChild(c),o.appendChild(d),$(`#collapse_${e}_${l} > div > form`).validate({debug:!1,submitHandler:function(e){return!1===e.classList.contains("postForm")?a(e):t(e),!1}})}$("#addPost_"+e).collapse("hide"),$("#collapse_"+l).collapse("hide"),d.querySelector(`#addPost_${e} > form input[name='Title']`).value="",d.querySelector(`#addPost_${e} > form textarea`).value=""})}function t(t){const a=parseInt($(t).data("id")),d=parseInt($(t).find("input[name='PostId']").val()),n=document.activeElement.value,o="DeletePost";n===o&&($(t).find("input#editForm1_"+d).remove(),$(t).find("textarea#editForm2_"+d).remove());const l=$(t).serialize(),s={RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value};$.ajax({method:n===o?"DELETE":"POST",url:`Blogs/${n}/${a}/true`,dataType:"json",data:l,headers:s}).done(function(t){if("error"!==t){if("deleted post"===t){const e=document.querySelector(`#heading_${a}_${d}`).parentElement;return void e.parentElement.removeChild(e)}{const d=document.querySelector("#collapse_"+a);e(a,d,[t])}}else alert("error")}).fail(function(e,t,a){alert("error: "+t+" "+a)})}function a(e){let t=$(e).parents("tr:first");const a=$(e).data("id"),d=$(e).find("#inp_"+a).val(),n=$(e).serialize(),o=document.activeElement.value,l="Delete";if(o!==l&&(""===d||d===t.find("label.displaying").text()))return;const s={RequestVerificationToken:$(e).find('input[name="__RequestVerificationToken"]').val()};$.ajax({method:o===l?"DELETE":"POST",url:`Blogs/${o}/${a}/true`,dataType:"json",data:n,headers:o===l?s:null}).done(function(a){if("error"!==a)if("deleted"!==a){$(e).find(".edit").val(a.url),t.find("label.displaying").text(a.url)}else $(t).remove();else alert("error")}).fail(function(e,t,a){alert("error: "+t+" "+a)})}Array.prototype.slice.call(document.querySelectorAll("form.blogForm")).forEach(function(a){const d=parseInt(a.dataset.id);let n=document.createElement("div");n.classList.add("col-sm-12"),n.classList.add("col-md-3"),n.classList.add("col-lg-1"),n.classList.add("mx-sm-1"),n.classList.add("px-0"),n.classList.add("unloaded");const o=document.createElement("a");o.setAttribute("role","button"),o.classList.add("form-control","btn","btn-outline-success"),o.setAttribute("data-bs-toggle","collapse"),o.href=`#collapse_${d}`,o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls",`collapse_${d}`),o.textContent="Posts",n.appendChild(o),a.appendChild(n),n=document.createElement("div"),n.id="collapse_"+d,n.classList.add("collapse","mt-2","unloaded");const l=document.createElement("a");l.setAttribute("role","button"),l.classList.add("btn","btn-outline-primary"),l.setAttribute("data-bs-toggle","collapse"),l.href=`#addPost_${d}`,l.setAttribute("aria-expanded","false"),l.setAttribute("aria-controls",`addPost_${d}`),l.textContent="New Post",n.appendChild(l);const s=document.createElement("div");s.classList.add("collapse","mt-2","card-body","border"),s.id=`addPost_${d}`;const r=document.createElement("form");r.method="post",r.setAttribute("action",`Blogs/AddPost/${d}/false`),r.classList.add("postForm","row","g-2","m-3"),r.setAttribute("data-id",d);const i=document.createElement("div");i.classList.add("text-danger","validation-summary-valid"),i.setAttribute("data-valmsg-summary","true");const c=document.createElement("ul"),u=document.createElement("li");u.style.display="none",c.appendChild(u),i.appendChild(c),r.appendChild(i);const m=document.createElement("div");m.classList.add("col-12");const p=document.createElement("label");p.setAttribute("for",`addForm1_${d}`),p.textContent="Title";const f=document.createElement("input");f.type="text",f.name="Title",f.classList.add("form-control"),f.id=`addForm1_${d}`,f.placeholder="title",f.setAttribute("data-val","true"),f.required=!0,f.setAttribute("data-val-required","The Title field is required."),m.appendChild(p),m.appendChild(f),r.appendChild(m);const b=document.createElement("div");b.classList.add("col-12");const h=document.createElement("label");h.setAttribute("for",`addForm2_${d}`),h.textContent="Content";const v=document.createElement("textarea");v.name="Content",v.classList.add("form-control"),v.id=`addForm2_${d}`,v.rows=3,v.placeholder="content",v.setAttribute("data-val","true"),v.required=!0,v.setAttribute("data-val-required","The Content field is required."),b.appendChild(h),b.appendChild(v),r.appendChild(b);const C=document.createElement("div");C.classList.add("col-sm-12","col-md-4","col-lg-4");const E=document.createElement("input");E.name="operation",E.type="submit",E.value="AddPost",E.classList.add("add-case","form-control","btn","btn-primary"),C.appendChild(E),r.appendChild(C),s.appendChild(r),n.appendChild(s),a.parentNode.insertBefore(n,a.nextSibling),$(`#addPost_${d} > form`).validate({debug:!1,submitHandler:function(e){return t(e),!1}}),$("#collapse_"+d).on("show.bs.collapse",function(t){const a=t.currentTarget;if(!0!==a.classList.contains("unloaded"))return;a.classList.remove("unloaded");const n={RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value};$.ajax({method:"POST",url:"Blogs/GetPosts/"+d,dataType:"json",headers:n}).done(function(t){"error"!==t?t&&t.length>0&&e(d,a,t):alert("error")}).fail(function(e,t,a){alert("error: "+t+" "+a)})})}),$.validator.setDefaults({debug:!1,submitHandler:function(e){return!1===e.classList.contains("postForm")?a(e):t(e),!1}})}
//# sourceMappingURL=Blogs.min.js.map
